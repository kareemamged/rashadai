# إعداد EmailJS لخدمة البريد الإلكتروني

هذا الدليل يشرح كيفية إعداد EmailJS لإرسال رسائل البريد الإلكتروني من تطبيق RashadAI.

## ما هو EmailJS؟

EmailJS هي خدمة تتيح إرسال رسائل البريد الإلكتروني مباشرة من JavaScript في المتصفح، دون الحاجة إلى خادم خلفي. يمكن استخدامها مع إعدادات SMTP الخاصة بك أو مع خدمات البريد الإلكتروني الشائعة مثل Gmail و Outlook و Yahoo.

## خطوات الإعداد

### 1. إنشاء حساب على EmailJS

1. قم بزيارة [موقع EmailJS](https://www.emailjs.com/) وانقر على "Sign Up Free"
2. قم بإنشاء حساب جديد باستخدام بريدك الإلكتروني أو حساب Google أو GitHub
3. قم بتأكيد بريدك الإلكتروني إذا لزم الأمر

### 2. إنشاء خدمة SMTP مخصصة

1. بعد تسجيل الدخول، انتقل إلى لوحة التحكم
2. انقر على "Email Services" في القائمة الجانبية
3. انقر على "Add New Service"
4. اختر "Custom SMTP" من القائمة
5. أدخل المعلومات التالية:
   - **Service Name**: اسم الخدمة (مثل "RashadAI SMTP")
   - **Host**: عنوان خادم SMTP (مثل "smtp.hostinger.com")
   - **Port**: منفذ SMTP (عادة 465 للاتصال الآمن)
   - **User**: اسم المستخدم (عادة عنوان البريد الإلكتروني)
   - **Password**: كلمة المرور
   - **Secure Connection**: اختر "SSL" أو "TLS" حسب إعدادات خادم البريد الإلكتروني
6. انقر على "Create Service"
7. لاحظ **Service ID** الذي سيتم إنشاؤه (مثل "service_abc123")

### 3. إنشاء قالب بريد إلكتروني

1. انتقل إلى "Email Templates" في القائمة الجانبية
2. انقر على "Create New Template"
3. أدخل المعلومات التالية:
   - **Template Name**: اسم القالب (مثل "RashadAI Template")
   - **Subject**: موضوع البريد الإلكتروني (يمكنك استخدام `{{subject}}` لجعله ديناميكي)
   - **Content**: محتوى البريد الإلكتروني
4. في محتوى البريد الإلكتروني، يمكنك استخدام المتغيرات التالية:
   - `{{to_email}}` - عنوان البريد الإلكتروني للمستلم
   - `{{from_name}}` - اسم المرسل
   - `{{subject}}` - موضوع البريد الإلكتروني
   - `{{message}}` - نص الرسالة
   - `{{html_message}}` - نص الرسالة بتنسيق HTML
   - `{{reply_to}}` - عنوان البريد الإلكتروني للرد
5. مثال على محتوى القالب:
```html
<!DOCTYPE html>
<html>
<head>
  <title>{{subject}}</title>
</head>
<body>
  <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
    <h2>{{subject}}</h2>
    <div>
      {{#if html_message}}
        {{{html_message}}}
      {{else}}
        <p>{{message}}</p>
      {{/if}}
    </div>
    <hr>
    <p style="color: #666; font-size: 12px;">
      هذه رسالة آلية من منصة RashadAI. يرجى عدم الرد على هذا البريد الإلكتروني.
    </p>
  </div>
</body>
</html>
```
6. انقر على "Save Template"
7. لاحظ **Template ID** الذي سيتم إنشاؤه (مثل "template_xyz789")

### 4. الحصول على المفتاح العام

1. انتقل إلى "Account" في القائمة الجانبية
2. انتقل إلى قسم "API Keys"
3. ستجد **Public Key** الخاص بك (مثل "user_abc123xyz789")
4. احتفظ بهذا المفتاح لاستخدامه في التطبيق

### 5. تحديث التطبيق بالمعرفات

1. افتح ملف `src/lib/emailjs.ts` في التطبيق
2. قم بتحديث المتغيرات التالية بالقيم التي حصلت عليها:
```javascript
const EMAILJS_SERVICE_ID = 'service_abc123'; // معرف الخدمة
const EMAILJS_TEMPLATE_ID = 'template_xyz789'; // معرف القالب
const EMAILJS_PUBLIC_KEY = 'user_abc123xyz789'; // المفتاح العام
```

## اختبار الإعدادات

بعد إكمال الإعدادات، يمكنك اختبار إرسال البريد الإلكتروني من خلال:

1. تسجيل الدخول إلى لوحة تحكم المسؤول في التطبيق
2. الانتقال إلى "إعدادات النظام" > "إعدادات البريد الإلكتروني"
3. إدخال عنوان بريد إلكتروني في حقل "اختبار الاتصال"
4. النقر على "إرسال اختبار"

إذا تم إعداد كل شيء بشكل صحيح، سيتم إرسال بريد إلكتروني اختباري إلى العنوان المحدد.

## استكشاف الأخطاء وإصلاحها

### مشكلة: خطأ "The Public Key is invalid"

- تأكد من أنك قمت بتحديث المفتاح العام بشكل صحيح في ملف `src/lib/emailjs.ts`
- تأكد من أن المفتاح العام صالح ونشط في حسابك على EmailJS

### مشكلة: خطأ "Service not found"

- تأكد من أنك قمت بتحديث معرف الخدمة بشكل صحيح في ملف `src/lib/emailjs.ts`
- تأكد من أن الخدمة نشطة في حسابك على EmailJS

### مشكلة: خطأ "Template not found"

- تأكد من أنك قمت بتحديث معرف القالب بشكل صحيح في ملف `src/lib/emailjs.ts`
- تأكد من أن القالب نشط في حسابك على EmailJS

### مشكلة: خطأ "SMTP connection failed"

- تأكد من أن إعدادات SMTP صحيحة (Host, Port, User, Password, Secure Connection)
- تأكد من أن خادم SMTP يسمح بالاتصال من EmailJS
- تحقق من سجلات الخطأ في لوحة تحكم EmailJS

## ملاحظات إضافية

- الخطة المجانية من EmailJS تسمح بإرسال 200 رسالة بريد إلكتروني شهرياً
- للاستخدام في بيئة الإنتاج، قد تحتاج إلى الترقية إلى خطة مدفوعة
- يمكنك إنشاء قوالب متعددة لأنواع مختلفة من رسائل البريد الإلكتروني (مثل نموذج الاتصال، الإبلاغ عن مشكلة، إلخ)
- يمكنك استخدام متغيرات مخصصة في القوالب حسب احتياجاتك

---

للمزيد من المعلومات، يرجى زيارة [توثيق EmailJS](https://www.emailjs.com/docs/).
