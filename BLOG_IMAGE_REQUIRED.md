# إجبارية صورة المنشور في المدونة

تم تحديث نظام المدونة ليكون رفع صورة المنشور إجباري على الناشر. هذا التحديث يضمن أن جميع المنشورات ستظهر بصورة مناسبة في صفحة المدونة وصفحة تفاصيل المنشور.

## التغييرات التي تم إجراؤها

1. **تعديل نموذج إنشاء/تعديل المنشور**:
   - تم تعديل دالة `validateForm` للتحقق من وجود صورة للمنشور.
   - تم إضافة علامة النجمة (*) إلى حقل الصورة للإشارة إلى أنه حقل إلزامي.
   - تم إضافة نص توضيحي يشير إلى أن الصورة إلزامية.

2. **تعديل دالة handleSubmit**:
   - تم إضافة تحقق إضافي للتأكد من وجود رابط صورة صالح.
   - تم إضافة رسالة خطأ واضحة في حالة فشل رفع الصورة.

3. **إضافة صورة بديلة موحدة**:
   - تم إضافة صورة بديلة موحدة باسم `default.webp` في مخزن Supabase.
   - تم إنشاء ثابت `DEFAULT_BLOG_IMAGE` في ملف `src/constants/images.ts`.
   - تم تعديل جميع الدوال ذات الصلة لاستخدام الصورة البديلة في حالة عدم وجود صورة أو في حالة تلف الصورة الأصلية.

4. **تحديث قاعدة البيانات**:
   - تم إنشاء ملف SQL `supabase/update_empty_images.sql` لتحديث روابط الصور الفارغة في قاعدة البيانات.

## كيفية استخدام النظام الجديد

### للمسؤولين

1. **إنشاء منشور جديد**:
   - عند إنشاء منشور جديد، يجب رفع صورة للمنشور.
   - إذا لم يتم رفع صورة، سيظهر خطأ "Featured image is required".

2. **تعديل منشور موجود**:
   - عند تعديل منشور موجود، يمكن الاحتفاظ بالصورة الحالية أو رفع صورة جديدة.
   - لا يمكن إزالة الصورة بدون رفع صورة بديلة.

### للمستخدمين

- جميع المنشورات ستظهر بصورة مناسبة في صفحة المدونة وصفحة تفاصيل المنشور.
- في حالة وجود مشكلة في تحميل الصورة، سيتم استخدام الصورة البديلة الموحدة.

## الخطوات التالية

1. **تنفيذ ملف SQL**:
   - قم بتنفيذ ملف `supabase/update_empty_images.sql` في Supabase SQL Editor لتحديث روابط الصور الفارغة في قاعدة البيانات.

2. **التحقق من النتائج**:
   - قم بتحديث التطبيق وتحقق من عرض الصور في صفحة البلوج وصفحة تفاصيل المنشور.

3. **التأكد من وجود الصورة البديلة**:
   - تأكد من أن الصورة البديلة `default.webp` موجودة في مخزن Supabase في المسار `images/blog/default.webp`.

## ملاحظات إضافية

- تم تصميم النظام ليكون سهل الاستخدام مع توفير رسائل خطأ واضحة.
- تم إضافة تعليقات توضيحية في الكود لتسهيل فهم التغييرات.
- تم توحيد استخدام الصورة البديلة في جميع أنحاء التطبيق.

---

تم التحديث بتاريخ: [التاريخ الحالي]
